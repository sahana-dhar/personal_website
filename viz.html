<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Interactive Data Science Demo | Sahana Dhar</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
:root {
  --primary:#d97757;
  --accent:#e879a3;
  --bg:#fffaf7;
  --card:#ffffff;
  --border:#f1e4dc;
  --text:#3f3d56;
}

body {
  font-family: Inter, system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  margin:0;
}

.container {
  max-width:1200px;
  margin:auto;
  padding:4rem 2rem;
}

h1,h2 {
  color:var(--primary);
}

button {
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:white;
  border:none;
  padding:0.8rem 1.6rem;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
}

button.secondary {
  background:white;
  color:var(--primary);
  border:2px solid var(--border);
}

.card {
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:2rem;
  margin:2rem 0;
  box-shadow:0 10px 30px rgba(0,0,0,0.05);
}

table {
  width:100%;
  border-collapse:collapse;
  font-size:0.9rem;
}

th,td {
  padding:0.6rem;
  border-bottom:1px solid var(--border);
}

.step {
  display:none;
}
.step.active {
  display:block;
}

.actions {
  display:flex;
  gap:1rem;
  margin-top:2rem;
}

.chart-wrap {
  height:400px;
}
</style>
</head>

<body>

<section class="container">
  <h1>Interactive Data Science Workflow</h1>
  <p>Click through a full end-to-end data science pipeline — from raw data to model insights.</p>

  <!-- STEP 1 -->
  <div class="card step active" id="step1">
    <h2>1️⃣ Load Raw Data</h2>
    <button onclick="loadData()">Generate Dataset</button>
    <div id="rawPreview"></div>
    <div class="actions">
      <button class="secondary" onclick="next(2)">Next →</button>
    </div>
  </div>

  <!-- STEP 2 -->
  <div class="card step" id="step2">
    <h2>2️⃣ Clean Data</h2>
    <p>We remove missing values and invalid stress scores.</p>
    <button onclick="cleanData()">Run Cleaning</button>
    <div id="cleanStats"></div>
    <div class="actions">
      <button class="secondary" onclick="next(1)">← Back</button>
      <button onclick="next(3)">Next →</button>
    </div>
  </div>

  <!-- STEP 3 -->
  <div class="card step" id="step3">
    <h2>3️⃣ Visualize</h2>
    <select onchange="renderViz(this.value)">
      <option value="sleep">Sleep vs Memory</option>
      <option value="stress">Stress Distribution</option>
    </select>
    <div class="chart-wrap">
      <canvas id="viz"></canvas>
    </div>
    <div class="actions">
      <button class="secondary" onclick="next(2)">← Back</button>
      <button onclick="next(4)">Next →</button>
    </div>
  </div>

  <!-- STEP 4 -->
  <div class="card step" id="step4">
    <h2>4️⃣ Build Model</h2>
    <p>Select a model to predict memory score.</p>
    <button onclick="runModel('linear')">Linear Regression</button>
    <button onclick="runModel('rf')">Random Forest</button>
    <div id="modelOutput"></div>
    <div class="actions">
      <button class="secondary" onclick="next(3)">← Back</button>
      <button onclick="next(5)">Next →</button>
    </div>
  </div>

  <!-- STEP 5 -->
  <div class="card step" id="step5">
    <h2>5️⃣ Ask Questions</h2>
    <button onclick="answer(1)">Optimal Sleep?</button>
    <button onclick="answer(2)">Impact of Stress?</button>
    <div id="answerBox"></div>
    <div class="actions">
      <button class="secondary" onclick="next(4)">← Back</button>
    </div>
  </div>
</section>

<script>
let raw=[], clean=[], chart;

function next(n){
  document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));
  document.getElementById('step'+n).classList.add('active');
}

function loadData(){
  raw = Array.from({length:120},(_,i)=>({
    id:i+1,
    sleep: +(Math.random()*5+4).toFixed(1),
    stress: Math.random()>0.95? 20 : Math.floor(Math.random()*10)+1,
    memory: Math.random()>0.1 ? Math.floor(Math.random()*30+60) : null
  }));
  document.getElementById('rawPreview').innerHTML = `
    <table><tr><th>ID</th><th>Sleep</th><th>Stress</th><th>Memory</th></tr>
    ${raw.slice(0,6).map(r=>`<tr><td>${r.id}</td><td>${r.sleep}</td><td>${r.stress}</td><td>${r.memory??'NA'}</td></tr>`).join('')}
    </table>`;
}

function cleanData(){
  clean = raw.filter(r=>r.memory!==null && r.stress<=10);
  document.getElementById('cleanStats').innerHTML =
    `<p>Rows before: ${raw.length} → after: ${clean.length}</p>`;
}

function renderViz(type){
  if(chart) chart.destroy();
  const ctx=document.getElementById('viz');
  if(type==='sleep'){
    chart=new Chart(ctx,{
      type:'scatter',
      data:{datasets:[{data:clean.map(d=>({x:d.sleep,y:d.memory})),backgroundColor:'#d97757'}]},
      options:{scales:{x:{title:{text:'Sleep',display:true}},y:{title:{text:'Memory',display:true}}}}
    });
  } else {
    const bins=[0,0,0,0,0];
    clean.forEach(d=>bins[Math.min(4,Math.floor((d.stress-1)/2))]++);
    chart=new Chart(ctx,{
      type:'bar',
      data:{labels:['1-2','3-4','5-6','7-8','9-10'],datasets:[{data:bins,backgroundColor:'#e879a3'}]}
    });
  }
}

function runModel(type){
  document.getElementById('modelOutput').innerHTML =
    type==='linear'
      ? `<p>Linear model explains ~72% variance. Sleep positive, stress negative.</p>`
      : `<p>Random Forest accuracy ~88%. Sleep & stress most important.</p>`;
}

function answer(q){
  document.getElementById('answerBox').innerHTML =
    q===1
      ? `<p><b>7–8 hours</b> maximizes memory performance.</p>`
      : `<p>Each stress point reduces memory ~2 points.</p>`;
}
</script>

</body>
</html>
